<%- include('../admin/layouts/head.ejs') -%>
<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
</head>

<body class="hold-transition sidebar-mini">
<div class="wrapper">
  <!-- Navbar -->
  <%- include('../admin/layouts/navbar.ejs') -%>
  <!-- /.navbar -->

  <!-- Main Sidebar Container -->
  <%- include('../admin/layouts/sidebar.ejs') -%>

  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">
    <!-- Content Header (Page header) -->
  
    <!-- /.content-header -->

    <!-- Main content -->
    <div class="content">
      <section class="content mt-3">
        <div class="container-fluid">
          <!-- Small boxes (Stat box) -->
          <div class="row">
            <div class="col-md-12">
              <!-- general form elements -->
              <div class="card card-info">
                <div class="card-header">
                  <h3 class="card-title">Profile</h3>
                </div>
                <!-- /.card-header -->
                <!-- form start -->
                <form id = "profileform" enctype="multipart/form-data">
                  <div class="card-body">
                    <div class="form-group">
                      <label for="exampleInputEmail1">Name</label>
                      <input type="hidden" class="form-control" name="_id"  id="_id">
                      <input type="text" class="form-control" id="name" name="name">
                    </div>
                    <div class="form-group">
                      <label for="exampleInputEmail1">Email</label>
                      <input type="hidden" class="form-control" name="_id"  id="exampleInputEmail1" placeholder="Enter email">
                      <input type="email" class="form-control" id="email" name="email" readonly>
                    </div>
                    <div class="form-group">
                      <label for="exampleInputPassword1">Password</label>
                      <input type="password" class="form-control" id="password" name="password" autocomplete="off">
                    </div>
                    
                    <div class="form-group">
                      <label for="exampleInputPassword1">Mobile</label>
                      <input type="text" class="form-control" id="mobile" name="mobile">
                    </div>
                    
                   <div class="form-group">
                      <label for="exampleInputFile">File input</label>
                      <div class="input-group">
                        <div class="custom-file">
                          <input type="file" class="custom-file-input"id="image" name="image">
                          <label class="custom-file-label" for="exampleInputFile">Choose file</label>
                        </div>
                        <div class="input-group-append">
                          <span class="input-group-text">Upload</span>
                        </div>
                      </div>
                    </div>
                   
                  </div>
                  <!-- /.card-body -->
  
                  <div class="card-footer">
                    <button type="submit" class="btn btn-info update_btn">Submit</button>
                  </div>
                </form>
              </div>
              <!-- /.card -->
  
           
  
            </div>
          </div>
          <!-- /.row -->
        
        </div><!-- /.container-fluid -->
      </section>
      <!-- /.container-fluid -->
    </div>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  <!-- Control Sidebar -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
  <script>
    $(document).ready(function(){
    // var _id = $(this).val();
    // alert(_id)
    $.ajax({
type: "get",
url: "/api/profile",
data:"json",
success: function(data){
// console.log(data);

// $('#image').val(data.image);
$('#name').val(data.name);
$('#email').val(data.email);
$('#password').val(data.password);
$('#mobile').val(data.mobile);
$('#_id').val(data._id);
}
});
    })

    $('#profileform').on('submit',function(e){
    e.preventDefault()
    // let id = $('#_id').val()
    // alert(id)
    let form= $(this)[0];
    let form_data = new FormData(form);    
   
// alert(id)

$.ajax({
    type:"post",
    url:"/api/profile",
    data:form_data,
    contentType: false,
    processData: false,
   //dataType: 'json',
    success:function(response){
          //  console.log(response,'sdgfsdf')
        // swal({
        //                 title: "Profile Update successful...",
        //                 // text: "Please check your email and password",
        //                 icon: "success",
        //                 button: "ok",
        //                 });
          
                        // window.location.reload()
         

    }
  
})
})

  </script>
  
  <!-- Main Footer -->
  <%- include('../admin/layouts/footer.ejs') -%>  
</div>
<!-- ./wrapper -->
<%- include('../admin/layouts/foot.ejs') -%>
<!-- REQUIRED SCRIPTS -->
